{"ast":null,"code":"import { updateObject } from '../utility';\nimport * as actions from '../actions/Index';\nconst initialState = {\n  productList: [],\n  displayedProductList: [],\n  displayedProductListAfterSearch: [],\n  productCompareProp: {\n    DESCRIPTION: [{\n      display: 'Manufacturer',\n      id: 'manufacturer'\n    }, {\n      display: 'Series',\n      id: 'series'\n    }, {\n      display: 'Model',\n      id: 'model'\n    }],\n    TYPE: [{\n      display: 'Use Type',\n      id: 'usetype'\n    }, {\n      display: 'Application',\n      id: 'application'\n    }, {\n      display: 'Mounting Location',\n      id: 'mountinglocation'\n    }, {\n      display: 'Accessories',\n      id: 'accessories'\n    }, {\n      display: 'Model year',\n      id: 'modelyear'\n    }],\n    TECHNICAL_SPECIFICATIONS: [{\n      display: 'Airflow (CFM)',\n      id: 'airflow'\n    }, {\n      display: 'Power (W)',\n      range: true,\n      id: 'power'\n    }, {\n      display: 'Operating voltage (VAC)',\n      range: true,\n      id: 'operatingvoltage'\n    }, {\n      display: 'Fan speed (RPM)',\n      range: true,\n      id: 'fanspeed'\n    }]\n  },\n  comparedProductId: [],\n  receiveState: 'init',\n  searchString: null,\n  selectedProductId: []\n};\n\nconst inRequesting = (state, action) => {\n  return updateObject(state, {\n    receiveState: 'process'\n  });\n};\n\nconst ReceiveSuccess = (state, action) => {\n  console.log(action.productList);\n  return updateObject(state, {\n    receiveState: 'success',\n    productList: action.productList,\n    displayedProductList: action.productList,\n    displayedProductListAfterSearch: action.productList\n  });\n};\n\nconst FilterCheck = (value, limits) => {\n  let realvalue = parseFloat(value);\n  let reallimits = [];\n\n  for (let lim of limits) reallimits.push(parseFloat(lim));\n\n  if (value >= limits[0] && value <= limits[1]) {\n    return true;\n  } else {\n    return false;\n  }\n};\n\nconst SearchCheck = (prod, pattern) => {\n  let is_select = false;\n  if (prod.productname.toLowerCase().match(pattern.toLowerCase())) is_select = is_select || true;\n  if (prod.model.toLowerCase().match(pattern.toLowerCase())) is_select = is_select || true;\n  if (prod.series.toLowerCase().match(pattern.toLowerCase())) is_select = is_select || true;\n  if (prod.manufacturer.toLowerCase().match(pattern.toLowerCase())) is_select = is_select || true;\n  return is_select;\n};\n\nconst FilterProductByFilter = (productList, items) => {\n  let displayed = [];\n\n  for (let i = 0; i < productList.length; i++) {\n    let curproduct = productList[i];\n    let is_select = true;\n\n    for (let key in items) {\n      if (!is_select) break;\n\n      for (let key_item in items[key]) {\n        is_select = is_select && FilterCheck(curproduct[items[key][key_item].id], items[key][key_item].value);\n      }\n    }\n\n    if (is_select) displayed.push(curproduct);\n  }\n\n  console.log(displayed);\n  return displayed;\n};\n\nconst FilterProductBySearch = (listToSearch, searchString) => {\n  let items = searchString;\n  let displayed = [];\n\n  if (items && items.length > 0) {\n    for (let prod of listToSearch) {\n      let is_select = SearchCheck(prod, items);\n      if (is_select) displayed.push(prod);\n    }\n  } else {\n    displayed = listToSearch;\n  }\n\n  console.log(displayed);\n  return displayed;\n};\n\nconst changeCompareList = (state, action) => {\n  let selected = [...state.comparedProductId];\n  let foundpid = selected.find(id => id === action.productid);\n\n  if (!foundpid) {\n    console.log('added');\n    selected.push(action.productid);\n  } else {\n    console.log('removed');\n    selected = selected.filter(pid => pid !== action.productid);\n  }\n\n  return updateObject(state, {\n    comparedProductId: selected\n  });\n};\n\nconst reducer = (state = initialState, action) => {\n  let searchdisplayed = [];\n  let displayed = [];\n\n  switch (action.type) {\n    case 'product_requesting':\n      return inRequesting(state, action);\n\n    case 'product_received':\n      return ReceiveSuccess(state, action);\n\n    case 'product_filter':\n      console.log('product_filter...');\n      console.log(action.searchString);\n      displayed = FilterProductByFilter(state.productList, action.sideitems);\n\n      if (state.searchString && state.searchString.length > 0) {\n        searchdisplayed = FilterProductBySearch(displayed, state.searchString);\n      } else {\n        searchdisplayed = displayed;\n      }\n\n      return updateObject(state, {\n        receiveState: 'success',\n        displayedProductList: displayed,\n        displayedProductListAfterSearch: searchdisplayed\n      });\n\n    case 'product_search':\n      console.log('product_search...');\n      console.log(action.searchString);\n      searchdisplayed = FilterProductBySearch(state.displayedProductList, action.searchString);\n      return updateObject(state, {\n        receiveState: 'success',\n        displayedProductListAfterSearch: searchdisplayed,\n        searchString: action.searchString\n      });\n\n    case 'product_filter_reset':\n      if (state.searchString && state.searchString.length > 0) {\n        searchdisplayed = FilterProductBySearch(state.productList, state.searchString);\n      } else {\n        searchdisplayed = state.productList;\n        console.log('reset_without search');\n      }\n\n      return updateObject(state, {\n        displayedProductList: state.productList,\n        displayedProductListAfterSearch: searchdisplayed\n      });\n\n    case 'product_compare_change':\n      return changeCompareList(state, action);\n\n    default:\n      return state;\n  }\n};\n\nexport default reducer;","map":{"version":3,"sources":["D:/ItlizeDocs/project2/project2_fe/src/store/reducers/product.js"],"names":["updateObject","actions","initialState","productList","displayedProductList","displayedProductListAfterSearch","productCompareProp","DESCRIPTION","display","id","TYPE","TECHNICAL_SPECIFICATIONS","range","comparedProductId","receiveState","searchString","selectedProductId","inRequesting","state","action","ReceiveSuccess","console","log","FilterCheck","value","limits","realvalue","parseFloat","reallimits","lim","push","SearchCheck","prod","pattern","is_select","productname","toLowerCase","match","model","series","manufacturer","FilterProductByFilter","items","displayed","i","length","curproduct","key","key_item","FilterProductBySearch","listToSearch","changeCompareList","selected","foundpid","find","productid","filter","pid","reducer","searchdisplayed","type","sideitems"],"mappings":"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","sourcesContent":["import {updateObject} from '../utility';\r\nimport * as actions from '../actions/Index';\r\n\r\nconst initialState = {\r\n    productList: [],\r\n    displayedProductList: [],\r\n    displayedProductListAfterSearch: [],\r\n    productCompareProp: {\r\n        DESCRIPTION:[\r\n            {display: 'Manufacturer', id: 'manufacturer'},\r\n            {display: 'Series', id: 'series'},\r\n            {display: 'Model', id: 'model'}\r\n        ],\r\n        TYPE:[\r\n            {display: 'Use Type', id: 'usetype'},\r\n            {display: 'Application', id: 'application'},\r\n            {display: 'Mounting Location', id: 'mountinglocation'},\r\n            {display: 'Accessories', id: 'accessories'},\r\n            {display: 'Model year', id: 'modelyear'}\r\n        ],\r\n        TECHNICAL_SPECIFICATIONS:[\r\n            {display: 'Airflow (CFM)', id: 'airflow'},\r\n            {display: 'Power (W)', range: true, id: 'power'},\r\n            {display: 'Operating voltage (VAC)', range: true, id: 'operatingvoltage'},\r\n            {display: 'Fan speed (RPM)', range:true, id: 'fanspeed'}\r\n        ]\r\n    },\r\n    comparedProductId: [],\r\n    receiveState: 'init',\r\n    searchString: null,\r\n    selectedProductId: [],\r\n};\r\n\r\n\r\nconst inRequesting = (state, action) => {\r\n    return updateObject(state, {\r\n        receiveState: 'process',\r\n    });\r\n}\r\n\r\nconst ReceiveSuccess = (state, action) => {\r\n    console.log(action.productList);\r\n    return updateObject(state, {\r\n        receiveState: 'success',\r\n        productList: action.productList, \r\n        displayedProductList: action.productList,\r\n        displayedProductListAfterSearch: action.productList\r\n    });\r\n}\r\n\r\nconst FilterCheck = (value, limits) => {\r\n    let realvalue = parseFloat(value);\r\n    let reallimits = [];\r\n    for(let lim of limits)\r\n        reallimits.push(parseFloat(lim));\r\n    if(value>=limits[0] && value<=limits[1]){\r\n        return true;\r\n    }else{\r\n        return false;\r\n    }\r\n}\r\n\r\nconst SearchCheck = (prod, pattern) => {\r\n    let is_select = false;\r\n    if(prod.productname.toLowerCase().match(pattern.toLowerCase()))\r\n        is_select = is_select || true;\r\n    if(prod.model.toLowerCase().match(pattern.toLowerCase()))\r\n        is_select = is_select || true;\r\n    if(prod.series.toLowerCase().match(pattern.toLowerCase()))\r\n        is_select = is_select || true;\r\n    if(prod.manufacturer.toLowerCase().match(pattern.toLowerCase()))\r\n        is_select = is_select || true;\r\n    return is_select;\r\n}\r\n\r\nconst FilterProductByFilter = (productList, items) => {\r\n    let displayed = [];\r\n    for(let i=0;i<productList.length; i++){\r\n        let curproduct = productList[i];\r\n        let is_select = true;\r\n        for(let key in items){\r\n            if(!is_select)break;\r\n            for(let key_item in items[key]){\r\n                is_select = is_select && \r\n                    FilterCheck(\r\n                        curproduct[items[key][key_item].id],\r\n                        items[key][key_item].value\r\n                    );\r\n            }\r\n        }\r\n        if(is_select)\r\n            displayed.push(curproduct);\r\n    }\r\n    console.log(displayed);\r\n    return displayed;\r\n}\r\n\r\nconst FilterProductBySearch = (listToSearch, searchString) => {\r\n    let items = searchString;\r\n\r\n    let displayed = [];\r\n    if(items && items.length>0){\r\n        for(let prod of listToSearch){\r\n            let is_select = SearchCheck(prod, items);\r\n            \r\n            if(is_select)\r\n                displayed.push(prod);\r\n        }\r\n    }\r\n    else{\r\n        displayed = listToSearch;\r\n    }\r\n    console.log(displayed);\r\n\r\n    return displayed;\r\n}\r\n\r\n\r\nconst changeCompareList = (state, action) => {\r\n    let selected = [...state.comparedProductId];\r\n    let foundpid = selected.find(id => id === action.productid);\r\n    if(!foundpid){\r\n        console.log('added');\r\n        selected.push(action.productid);\r\n    } else {\r\n        console.log('removed');\r\n        selected = selected.filter(pid => pid !== action.productid);\r\n    }\r\n    return updateObject(state,{comparedProductId: selected});\r\n}\r\n\r\n\r\n\r\nconst reducer = (state = initialState, action) => {\r\n    let searchdisplayed=[];\r\n    let displayed=[];\r\n\r\n    switch(action.type) {\r\n        case 'product_requesting':\r\n            return inRequesting(state,action);\r\n        case 'product_received': \r\n            return ReceiveSuccess(state, action);\r\n        case 'product_filter': \r\n            console.log('product_filter...');\r\n            console.log(action.searchString);\r\n\r\n            displayed = FilterProductByFilter(state.productList, action.sideitems);\r\n            \r\n            if(state.searchString && state.searchString.length>0){\r\n                searchdisplayed = FilterProductBySearch(displayed, state.searchString);\r\n            }\r\n            else{\r\n                searchdisplayed = displayed;\r\n            }\r\n            return updateObject(state, {\r\n                receiveState: 'success',\r\n                displayedProductList: displayed,\r\n                displayedProductListAfterSearch: searchdisplayed,\r\n            });\r\n        case 'product_search':\r\n            console.log('product_search...');\r\n            console.log(action.searchString);\r\n\r\n            searchdisplayed = FilterProductBySearch(state.displayedProductList, action.searchString);\r\n            return updateObject(state, {\r\n                receiveState: 'success',\r\n                displayedProductListAfterSearch: searchdisplayed,\r\n                searchString: action.searchString\r\n            });\r\n        case 'product_filter_reset':\r\n            if(state.searchString && state.searchString.length>0){\r\n                searchdisplayed = FilterProductBySearch(state.productList, state.searchString);                \r\n            }else{\r\n                searchdisplayed = state.productList;\r\n                console.log('reset_without search');\r\n            }\r\n            return updateObject(state,{\r\n                displayedProductList: state.productList, \r\n                displayedProductListAfterSearch: searchdisplayed,\r\n            });\r\n        case 'product_compare_change':\r\n            return changeCompareList(state, action);\r\n        default:  \r\n            return state;\r\n    }\r\n};\r\n\r\nexport default reducer;\r\n"]},"metadata":{},"sourceType":"module"}